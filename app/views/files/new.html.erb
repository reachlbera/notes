<div class="well">
  <%= form_for @importation,:url=> {:action => 'index'},:html=>{:onsubmit=>"return check_submit_file();"}   do |f| %>
  <i class="icon-file"></i><span>请选择要导入的本地文件:</span>
  <hr>
  <div class="row-fluid" style="padding-bottom:0.8em">
    <div class="span2"><b>文件:</b></div>
    <div class="span10">
      <%= f.file_field :avatar, :style=>'Z-INDEX: 2;POSITION: absolute;TEXT-ALIGN: right; moz-opacity: 0; opacity: 0;' %>
        <div class="input-append" style="Z-INDEX: 1;POSITION: relative;">
          <input id="filename" class="input-large" type="text">
            <a class="btn" onclick="$('input[id=file_log_avatar]').click();">选择文件</a>
        </div>
        <script type="text/javascript">
          $('input[id=file_log_avatar]').change(function() {
            var str = $(this).val().split("\\")
            $('#filename').val($(this).val().split("\\")[str.length-1]);
          });
        </script>
    </div>
  </div>
  <div class="row-fluid" style="padding-bottom:0.5em">
    <div class="span2"><b>已有数据选项：</b></div>
  </div>
  <div class="row-fluid" >
    <%= f.submit :value=>'提交',:id=>'voc_importations', :class=>'btn btn-primary' ,:style=>'padding-left:2em;padding-right:2em'%>
  </div>
  <% end %>
</div>

<style type="text/css">
  input[type='radio']{
    float: none!important;
    margin-left: 0!important;
  }
</style>
<script type="text/javascript">
  function check_submit_file() {
    var textobj = document.getElementById("file_log_avatar");
    if (textobj.value.length == 0) {
      alert("没有选择上传的文件！");
      return false;
    }
    var reg = /^.+\.(csv)|(CSV)|(txt)|(TXT)$/;
    if (!reg.test(textobj.value)) {
      alert("上传的文件类型不符合要求！");
      return false;
    }
    return true;
  }
</script>
